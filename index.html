<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Mi Stellarium Web AR</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  </head>
  <body>
    <script>
      // COMPONENTE PARA GENERAR ESTRELLAS
      // Esto crea esferas pequeñas alrededor del usuario para simular estrellas
      AFRAME.registerComponent('star-system', {
        schema: {
          count: {type: 'int', default: 1000},
          radius: {type: 'number', default: 300}
        },
        init: function () {
          var scene = this.el.sceneEl;
          for (var i = 0; i < this.data.count; i++) {
            var star = document.createElement('a-sphere');
            
            // Posición aleatoria en coordenadas esféricas
            var r = this.data.radius;
            var theta = Math.random() * 2 * Math.PI;
            var phi = Math.acos(2 * Math.random() - 1);
            
            var x = r * Math.sin(phi) * Math.cos(theta);
            var y = r * Math.sin(phi) * Math.sin(theta);
            var z = r * Math.cos(phi);

            star.setAttribute('position', {x: x, y: y, z: z});
            
            // Tamaño y color aleatorio para realismo
            var size = Math.random() * 0.5 + 0.1;
            star.setAttribute('radius', size);
            star.setAttribute('color', '#FFF');
            star.setAttribute('shader', 'flat'); // Mejor rendimiento
            
            this.el.appendChild(star);
          }
        }
      });
    </script>

    <a-scene loading-screen="dotsColor: white; backgroundColor: black">
      
      <a-entity camera look-controls="magicWindowTrackingEnabled: true" position="0 1.6 0">
          <a-text value="Mueve tu celular para explorar" position="0 -0.5 -1" 
                  align="center" width="2" color="cyan"></a-text>
      </a-entity>

      <a-entity star-system="count: 1500; radius: 400"></a-entity>

      <a-sphere position="20 40 -100" radius="5" src="https://upload.wikimedia.org/wikipedia/commons/e/e2/Jupiter.jpg" 
                animation="property: rotation; to: 0 360 0; loop: true; dur: 20000">
        <a-text value="Jupiter" position="0 6 0" align="center" width="50" color="white"></a-text>
      </a-sphere>

      <a-sky color="#050510"></a-sky>

    </a-scene>
  </body>
</html>
